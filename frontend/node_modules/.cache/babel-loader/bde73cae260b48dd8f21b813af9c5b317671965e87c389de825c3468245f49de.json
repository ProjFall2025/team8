{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vp141\\\\smart-property-system\\\\frontend\\\\src\\\\components\\\\TenantPasscodeValidator.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TenantPasscodeValidator = ({\n  user\n}) => {\n  _s();\n  const [code, setCode] = useState('');\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const handleValidate = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setResult(null);\n    try {\n      var _res$data;\n      const res = await axios.post('/api/smart-passcodes/validate', {\n        passcode: code\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.valid) {\n        setResult({\n          success: true,\n          message: '‚úÖ Passcode is valid and active!'\n        });\n      } else {\n        setResult({\n          success: false,\n          message: '‚ùå Invalid or expired passcode.'\n        });\n      }\n    } catch (err) {\n      console.error('‚ùå Validation error:', err);\n      setResult({\n        success: false,\n        message: 'Server error. Try again.'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleForgot = async () => {\n    setLoading(true);\n    setResult(null);\n    try {\n      const res = await axios.post('/api/smart-passcodes/regenerate', {\n        user_id: user === null || user === void 0 ? void 0 : user.user_id,\n        lease_id: user === null || user === void 0 ? void 0 : user.lease_id\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setResult({\n        success: true,\n        message: `üîë New passcode generated: ${res.data.passcode}`\n      });\n    } catch (err) {\n      console.error('‚ùå Regenerate error:', err);\n      setResult({\n        success: false,\n        message: 'Could not regenerate passcode.'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: title,\n      children: \"Tenant Passcode Validation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleValidate,\n      style: form,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your passcode\",\n        value: code,\n        onChange: e => setCode(e.target.value),\n        style: input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: button,\n        disabled: loading,\n        children: loading ? 'Validating...' : 'Validate'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: forgot,\n      children: [\"Forgot your passcode?\", /*#__PURE__*/_jsxDEV(\"button\", {\n        style: linkBtn,\n        onClick: handleForgot,\n        disabled: loading,\n        children: \"Request New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), result && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: result.success ? '#27ae60' : '#c0392b',\n        fontWeight: '600'\n      },\n      children: result.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n/* üé® Styles */\n_s(TenantPasscodeValidator, \"RD53oS77qXB+jAjaN0C7aN4fY5s=\");\n_c = TenantPasscodeValidator;\nconst container = {\n  maxWidth: '500px',\n  margin: '2rem auto',\n  background: '#fff',\n  padding: '2rem',\n  borderRadius: '12px',\n  boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\n  textAlign: 'center'\n};\nconst title = {\n  fontSize: '1.4rem',\n  fontWeight: '600',\n  marginBottom: '1rem'\n};\nconst form = {\n  display: 'flex',\n  gap: '0.5rem',\n  justifyContent: 'center'\n};\nconst input = {\n  flex: 1,\n  padding: '0.6rem',\n  border: '1px solid #ccc',\n  borderRadius: '8px',\n  fontSize: '0.95rem'\n};\nconst button = {\n  padding: '0.6rem 1.2rem',\n  border: 'none',\n  borderRadius: '8px',\n  backgroundColor: '#3498db',\n  color: '#fff',\n  fontWeight: '600',\n  cursor: 'pointer'\n};\nconst forgot = {\n  marginTop: '1rem',\n  fontSize: '0.9rem',\n  color: '#666'\n};\nconst linkBtn = {\n  background: 'none',\n  border: 'none',\n  color: '#3498db',\n  cursor: 'pointer',\n  fontWeight: '600',\n  marginLeft: '0.5rem'\n};\nexport default TenantPasscodeValidator;\nvar _c;\n$RefreshReg$(_c, \"TenantPasscodeValidator\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","TenantPasscodeValidator","user","_s","code","setCode","result","setResult","loading","setLoading","handleValidate","e","preventDefault","_res$data","res","post","passcode","headers","Authorization","localStorage","getItem","data","valid","success","message","err","console","error","handleForgot","user_id","lease_id","style","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","form","type","placeholder","value","onChange","target","input","button","disabled","forgot","linkBtn","onClick","color","fontWeight","_c","maxWidth","margin","background","padding","borderRadius","boxShadow","textAlign","fontSize","marginBottom","display","gap","justifyContent","flex","border","backgroundColor","cursor","marginTop","marginLeft","$RefreshReg$"],"sources":["C:/Users/vp141/smart-property-system/frontend/src/components/TenantPasscodeValidator.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst TenantPasscodeValidator = ({ user }) => {\r\n  const [code, setCode] = useState('');\r\n  const [result, setResult] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleValidate = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const res = await axios.post('/api/smart-passcodes/validate',\r\n        { passcode: code },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n      );\r\n      if (res.data?.valid) {\r\n        setResult({ success: true, message: '‚úÖ Passcode is valid and active!' });\r\n      } else {\r\n        setResult({ success: false, message: '‚ùå Invalid or expired passcode.' });\r\n      }\r\n    } catch (err) {\r\n      console.error('‚ùå Validation error:', err);\r\n      setResult({ success: false, message: 'Server error. Try again.' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForgot = async () => {\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const res = await axios.post('/api/smart-passcodes/regenerate', {\r\n        user_id: user?.user_id,\r\n        lease_id: user?.lease_id\r\n      }, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      setResult({ success: true, message: `üîë New passcode generated: ${res.data.passcode}` });\r\n    } catch (err) {\r\n      console.error('‚ùå Regenerate error:', err);\r\n      setResult({ success: false, message: 'Could not regenerate passcode.' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={container}>\r\n      <h2 style={title}>Tenant Passcode Validation</h2>\r\n      <form onSubmit={handleValidate} style={form}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter your passcode\"\r\n          value={code}\r\n          onChange={(e) => setCode(e.target.value)}\r\n          style={input}\r\n        />\r\n        <button type=\"submit\" style={button} disabled={loading}>\r\n          {loading ? 'Validating...' : 'Validate'}\r\n        </button>\r\n      </form>\r\n\r\n      <p style={forgot}>\r\n        Forgot your passcode?\r\n        <button style={linkBtn} onClick={handleForgot} disabled={loading}>\r\n          Request New\r\n        </button>\r\n      </p>\r\n\r\n      {result && (\r\n        <p style={{ color: result.success ? '#27ae60' : '#c0392b', fontWeight: '600' }}>\r\n          {result.message}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/* üé® Styles */\r\nconst container = {\r\n  maxWidth: '500px',\r\n  margin: '2rem auto',\r\n  background: '#fff',\r\n  padding: '2rem',\r\n  borderRadius: '12px',\r\n  boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\r\n  textAlign: 'center'\r\n};\r\nconst title = { fontSize: '1.4rem', fontWeight: '600', marginBottom: '1rem' };\r\nconst form = { display: 'flex', gap: '0.5rem', justifyContent: 'center' };\r\nconst input = {\r\n  flex: 1,\r\n  padding: '0.6rem',\r\n  border: '1px solid #ccc',\r\n  borderRadius: '8px',\r\n  fontSize: '0.95rem'\r\n};\r\nconst button = {\r\n  padding: '0.6rem 1.2rem',\r\n  border: 'none',\r\n  borderRadius: '8px',\r\n  backgroundColor: '#3498db',\r\n  color: '#fff',\r\n  fontWeight: '600',\r\n  cursor: 'pointer'\r\n};\r\nconst forgot = { marginTop: '1rem', fontSize: '0.9rem', color: '#666' };\r\nconst linkBtn = {\r\n  background: 'none',\r\n  border: 'none',\r\n  color: '#3498db',\r\n  cursor: 'pointer',\r\n  fontWeight: '600',\r\n  marginLeft: '0.5rem'\r\n};\r\n\r\nexport default TenantPasscodeValidator;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,uBAAuB,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMa,cAAc,GAAG,MAAOC,CAAC,IAAK;IAClCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBH,UAAU,CAAC,IAAI,CAAC;IAChBF,SAAS,CAAC,IAAI,CAAC;IACf,IAAI;MAAA,IAAAM,SAAA;MACF,MAAMC,GAAG,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,+BAA+B,EAC1D;QAAEC,QAAQ,EAAEZ;MAAK,CAAC,EAClB;QAAEa,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAG;MAAE,CAC1E,CAAC;MACD,KAAAP,SAAA,GAAIC,GAAG,CAACO,IAAI,cAAAR,SAAA,eAARA,SAAA,CAAUS,KAAK,EAAE;QACnBf,SAAS,CAAC;UAAEgB,OAAO,EAAE,IAAI;UAAEC,OAAO,EAAE;QAAkC,CAAC,CAAC;MAC1E,CAAC,MAAM;QACLjB,SAAS,CAAC;UAAEgB,OAAO,EAAE,KAAK;UAAEC,OAAO,EAAE;QAAiC,CAAC,CAAC;MAC1E;IACF,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MACzClB,SAAS,CAAC;QAAEgB,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAE;MAA2B,CAAC,CAAC;IACpE,CAAC,SAAS;MACRf,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMmB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/BnB,UAAU,CAAC,IAAI,CAAC;IAChBF,SAAS,CAAC,IAAI,CAAC;IACf,IAAI;MACF,MAAMO,GAAG,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,iCAAiC,EAAE;QAC9Dc,OAAO,EAAE3B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE2B,OAAO;QACtBC,QAAQ,EAAE5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE4B;MAClB,CAAC,EAAE;QACDb,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAG;MACtE,CAAC,CAAC;MACFb,SAAS,CAAC;QAAEgB,OAAO,EAAE,IAAI;QAAEC,OAAO,EAAE,8BAA8BV,GAAG,CAACO,IAAI,CAACL,QAAQ;MAAG,CAAC,CAAC;IAC1F,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MACzClB,SAAS,CAAC;QAAEgB,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAE;MAAiC,CAAC,CAAC;IAC1E,CAAC,SAAS;MACRf,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACET,OAAA;IAAK+B,KAAK,EAAEC,SAAU;IAAAC,QAAA,gBACpBjC,OAAA;MAAI+B,KAAK,EAAEG,KAAM;MAAAD,QAAA,EAAC;IAA0B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjDtC,OAAA;MAAMuC,QAAQ,EAAE7B,cAAe;MAACqB,KAAK,EAAES,IAAK;MAAAP,QAAA,gBAC1CjC,OAAA;QACEyC,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,qBAAqB;QACjCC,KAAK,EAAEvC,IAAK;QACZwC,QAAQ,EAAGjC,CAAC,IAAKN,OAAO,CAACM,CAAC,CAACkC,MAAM,CAACF,KAAK,CAAE;QACzCZ,KAAK,EAAEe;MAAM;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC,eACFtC,OAAA;QAAQyC,IAAI,EAAC,QAAQ;QAACV,KAAK,EAAEgB,MAAO;QAACC,QAAQ,EAAExC,OAAQ;QAAAyB,QAAA,EACpDzB,OAAO,GAAG,eAAe,GAAG;MAAU;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAEPtC,OAAA;MAAG+B,KAAK,EAAEkB,MAAO;MAAAhB,QAAA,GAAC,uBAEhB,eAAAjC,OAAA;QAAQ+B,KAAK,EAAEmB,OAAQ;QAACC,OAAO,EAAEvB,YAAa;QAACoB,QAAQ,EAAExC,OAAQ;QAAAyB,QAAA,EAAC;MAElE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,EAEHhC,MAAM,iBACLN,OAAA;MAAG+B,KAAK,EAAE;QAAEqB,KAAK,EAAE9C,MAAM,CAACiB,OAAO,GAAG,SAAS,GAAG,SAAS;QAAE8B,UAAU,EAAE;MAAM,CAAE;MAAApB,QAAA,EAC5E3B,MAAM,CAACkB;IAAO;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CACJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AAAAnC,EAAA,CA9EMF,uBAAuB;AAAAqD,EAAA,GAAvBrD,uBAAuB;AA+E7B,MAAM+B,SAAS,GAAG;EAChBuB,QAAQ,EAAE,OAAO;EACjBC,MAAM,EAAE,WAAW;EACnBC,UAAU,EAAE,MAAM;EAClBC,OAAO,EAAE,MAAM;EACfC,YAAY,EAAE,MAAM;EACpBC,SAAS,EAAE,6BAA6B;EACxCC,SAAS,EAAE;AACb,CAAC;AACD,MAAM3B,KAAK,GAAG;EAAE4B,QAAQ,EAAE,QAAQ;EAAET,UAAU,EAAE,KAAK;EAAEU,YAAY,EAAE;AAAO,CAAC;AAC7E,MAAMvB,IAAI,GAAG;EAAEwB,OAAO,EAAE,MAAM;EAAEC,GAAG,EAAE,QAAQ;EAAEC,cAAc,EAAE;AAAS,CAAC;AACzE,MAAMpB,KAAK,GAAG;EACZqB,IAAI,EAAE,CAAC;EACPT,OAAO,EAAE,QAAQ;EACjBU,MAAM,EAAE,gBAAgB;EACxBT,YAAY,EAAE,KAAK;EACnBG,QAAQ,EAAE;AACZ,CAAC;AACD,MAAMf,MAAM,GAAG;EACbW,OAAO,EAAE,eAAe;EACxBU,MAAM,EAAE,MAAM;EACdT,YAAY,EAAE,KAAK;EACnBU,eAAe,EAAE,SAAS;EAC1BjB,KAAK,EAAE,MAAM;EACbC,UAAU,EAAE,KAAK;EACjBiB,MAAM,EAAE;AACV,CAAC;AACD,MAAMrB,MAAM,GAAG;EAAEsB,SAAS,EAAE,MAAM;EAAET,QAAQ,EAAE,QAAQ;EAAEV,KAAK,EAAE;AAAO,CAAC;AACvE,MAAMF,OAAO,GAAG;EACdO,UAAU,EAAE,MAAM;EAClBW,MAAM,EAAE,MAAM;EACdhB,KAAK,EAAE,SAAS;EAChBkB,MAAM,EAAE,SAAS;EACjBjB,UAAU,EAAE,KAAK;EACjBmB,UAAU,EAAE;AACd,CAAC;AAED,eAAevE,uBAAuB;AAAC,IAAAqD,EAAA;AAAAmB,YAAA,CAAAnB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}