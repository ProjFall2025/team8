{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vp141\\\\smart-property-system\\\\frontend\\\\src\\\\pages\\\\RoleProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport { Navigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoleProtectedRoute({\n  children,\n  allowedRoles\n}) {\n  _s();\n  var _user$role;\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const t = localStorage.getItem('token');\n    const u = localStorage.getItem('user');\n    setToken(t);\n    setUser(u ? JSON.parse(u) : null);\n    console.log(\"üîê Token read in RoleProtectedRoute:\", t);\n    console.log(\"üë§ User read in RoleProtectedRoute:\", u);\n  }, []); // runs after mount, ensures localStorage is updated\n\n  if (!token || !user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 12\n    }, this);\n  }\n  const normalizedRole = (_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.toLowerCase();\n  const normalizedAllowed = allowedRoles.map(r => r.toLowerCase());\n  console.log(\"üîç RoleProtectedRoute check:\", normalizedRole, \"vs allowed:\", normalizedAllowed);\n  if (!normalizedAllowed.includes(normalizedRole)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/unauthorized\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n}\n_s(RoleProtectedRoute, \"lTc4oKMP/OVEHM3fW8W5olMCd7E=\");\n_c = RoleProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"RoleProtectedRoute\");","map":{"version":3,"names":["Navigate","useEffect","useState","jsxDEV","_jsxDEV","RoleProtectedRoute","children","allowedRoles","_s","_user$role","token","setToken","user","setUser","t","localStorage","getItem","u","JSON","parse","console","log","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","normalizedRole","role","toLowerCase","normalizedAllowed","map","r","includes","_c","$RefreshReg$"],"sources":["C:/Users/vp141/smart-property-system/frontend/src/pages/RoleProtectedRoute.js"],"sourcesContent":["import { Navigate } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function RoleProtectedRoute({ children, allowedRoles }) {\r\n  const [token, setToken] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const t = localStorage.getItem('token');\r\n    const u = localStorage.getItem('user');\r\n    setToken(t);\r\n    setUser(u ? JSON.parse(u) : null);\r\n\r\n    console.log(\"üîê Token read in RoleProtectedRoute:\", t);\r\n    console.log(\"üë§ User read in RoleProtectedRoute:\", u);\r\n  }, []); // runs after mount, ensures localStorage is updated\r\n\r\n  if (!token || !user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  const normalizedRole = user.role?.toLowerCase();\r\n  const normalizedAllowed = allowedRoles.map(r => r.toLowerCase());\r\n\r\n  console.log(\"üîç RoleProtectedRoute check:\", normalizedRole, \"vs allowed:\", normalizedAllowed);\r\n\r\n  if (!normalizedAllowed.includes(normalizedRole)) {\r\n    return <Navigate to=\"/unauthorized\" replace />;\r\n  }\r\n\r\n  return children;\r\n}"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,eAAe,SAASC,kBAAkBA,CAAC;EAAEC,QAAQ;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,UAAA;EACrE,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,MAAMa,CAAC,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACvC,MAAMC,CAAC,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACtCL,QAAQ,CAACG,CAAC,CAAC;IACXD,OAAO,CAACI,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACF,CAAC,CAAC,GAAG,IAAI,CAAC;IAEjCG,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEP,CAAC,CAAC;IACtDM,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEJ,CAAC,CAAC;EACvD,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER,IAAI,CAACP,KAAK,IAAI,CAACE,IAAI,EAAE;IACnB,oBAAOR,OAAA,CAACJ,QAAQ;MAACsB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;EAEA,MAAMC,cAAc,IAAAnB,UAAA,GAAGG,IAAI,CAACiB,IAAI,cAAApB,UAAA,uBAATA,UAAA,CAAWqB,WAAW,CAAC,CAAC;EAC/C,MAAMC,iBAAiB,GAAGxB,YAAY,CAACyB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACH,WAAW,CAAC,CAAC,CAAC;EAEhEV,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEO,cAAc,EAAE,aAAa,EAAEG,iBAAiB,CAAC;EAE7F,IAAI,CAACA,iBAAiB,CAACG,QAAQ,CAACN,cAAc,CAAC,EAAE;IAC/C,oBAAOxB,OAAA,CAACJ,QAAQ;MAACsB,EAAE,EAAC,eAAe;MAACC,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAChD;EAEA,OAAOrB,QAAQ;AACjB;AAACE,EAAA,CA5BuBH,kBAAkB;AAAA8B,EAAA,GAAlB9B,kBAAkB;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}